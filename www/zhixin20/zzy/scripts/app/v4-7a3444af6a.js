"use strict";define(["util","appinfo","knockout"],function(o,e,a){var i=new URLSearchParams(location.search),s=o.isWechat(),n=i.get("chid").toLowerCase().replace(/s.*-/g,"")||{"dl.zhangzhongyun.com":35881,"zzy.ddbb1.com":33534,"zzy-sg.51zhuoyue.cn":40738,"zzy-sm.51zhuoyue.cn":40739}[location.hostname]||33534,t=i.get("pkg")||"7",r=e.package_infos[t],u=navigator.userAgent,d=!!u.match(/\(i[^;]+;( U;)? CPU.+Mac OS X/),b=-1!==u.indexOf("baiduboxapp"),p=void 0,l=void 0,h="",c=[{thumb:"https://p.qirexiaoshuo.com/uploads/image/20170306/58bd05c43929a.jpg",title:"孽火"},{thumb:"https://p.qirexiaoshuo.com/uploads/image/20171026/59f1ab8ab2d18.jpg",title:"如果从没爱过你"},{thumb:"https://p.qirexiaoshuo.com/uploads/image/20171102/59faba2d1a032.jpg",title:"热辣新妻"},{thumb:"https://p.qirexiaoshuo.com/uploads/book/201711/28/book201711281444143460.jpg",title:"爱你纵使繁华一场"},{thumb:"https://p.qirexiaoshuo.com/uploads/book/201712/04/book201712041408523096.jpg",title:"前妻在侧虐成欢"},{thumb:"https://p.qirexiaoshuo.com/uploads/book/201801/16/book201801160954563128.jpg",title:"予你痴情，赠我伤痛"},{thumb:"https://p.qirexiaoshuo.com/uploads/book/201712/25/book201712251444549321.jpg",title:"爱比离别多一点"},{thumb:"https://p.qirexiaoshuo.com/uploads/book/201801/17/book201801171656549027.jpg",title:"逆天狂妃：邪帝，用力宠"},{thumb:"https://p.qirexiaoshuo.com/uploads/book/201801/09/book201801091036227705.jpg",title:"灿若星眸只为你"},{thumb:"https://p.qirexiaoshuo.com/uploads/book/201801/08/book201801081658542976.jpg",title:"余生执手，与你同欢"},{thumb:"https://p.qirexiaoshuo.com/uploads/book/201802/26/book201802261211099570.jpg",title:"青山不及你眉长"},{thumb:"https://p.qirexiaoshuo.com/uploads/book/201802/26/book201802260927379428.jpg",title:"情有独钟"}],m={title:a.observable("加载中..."),author:a.observable("加载中..."),summary:a.observable("加载中..."),status:a.observable("加载中..."),thumb:a.observable(),category:a.observable(),read:a.observable(),list:a.observableArray(),wxname:a.observable("加载中..."),rawid:a.observable(),copyright:a.observable()};return{init:function(o){var t;$("#container"),p=$("#mask"),$("#close"),l=$("#msg"),a.applyBindings(m,document.body),m.list(c),m.copyright(o||""),t="/data/"+i.get("id")+".json",$.getJSON(t,function(o){m.title(o.title),m.thumb(o.thumb),m.author(o.author),m.summary(o.summary),m.status(o.status),m.category(o.category),m.read(o.read);var t="a",e=o.wxname,a=o.rawid;if(h=o.wxlink,o.enable_abtest&&"b"==(t=.5<Math.random()?"b":"a")&&(h=o.wxlink_b,e=o.wxname_b,a=o.rawid_b),m.wxname(e),m.rawid("https://open.weixin.qq.com/qr/code?username="+a),$(document.body).addClass("version-"+t),a&&e&&h){var i=h.indexOf("?");h+=0<i?"&raw_id="+a+"&wxname="+encodeURIComponent(e):"?raw_id="+a+"&wxname="+encodeURIComponent(e)}var s=new ClipboardJS("#btn-copy",{text:function(o){return e}});s.on("success",function(o){l.text("已复制！"),setTimeout(function(){l.text("")},1500)})}),$(document).on("tap","#container",function(){"app"===window.__type?$.os.android?s?$masker.show():(n||alert("缺少 chid"),e.fetch(n,function(o){var t,e;console.log("Loading iframe: "+o.download_url),t=o.download_url,e=document.createElement("iframe"),$(e).css({width:0,height:0,position:"absolute",left:"-5000px"}),e.onload=function(){document.body.removeChild(e)},e.src=t,document.body.appendChild(e)})):$.os.ios?window.top.location.href=r.url:alert("只支持 Android 和 iOS 设备！"):d&&b?p.hasClass("hide")&&setTimeout(function(){p.removeClass("hide").show()},380):window.top.location.href=h}),$(document).on("tap","#close",function(o){o.preventDefault(),p.addClass("hide").hide(),l.text("")})}}});