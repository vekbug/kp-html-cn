"use strict";define(["knockout"],function(a){var n=new URLSearchParams(location.search).get("id"),r=null,o=null;function i(){var e=new ClipboardJS(".button-copy",{text:function(){return o}});window._agl&&window._agl.push(["track",["success",{t:3}]]),e.on("success",function(e){var n=$("<div/>",{text:"已复制好",style:"position:fixed;top:50%;left:50%;transform:translate(-50%);background:rgba(0, 0, 0, .9);color:#fff;font-size:16px;padding: 10px 20px;border-radius:5px;"});n.appendTo("body"),setTimeout(function(){n.remove()},1500)})}return{init:function(){var e;e=n,$.ajax({url:"https://sem-api.zhangzhongyun.com/api/tpl/getinfobyid?id="+e,dataType:"jsonp",success:function(e){0===e.code?(r=e.data,document.title=r.mp_name||"掌中云",$.ajax({url:"https://api.818tu.com/v1/jsonp/bidding?articles="+(r.display_article_count||2)+"&latest_entry=0&id="+r.novel_id,dataType:"jsonp",success:function(e){if(e.error)alert(e.error);else{var n=e.data.articles,t=n.map(function(e){var n=e.content.split("\n"),t=n.map(function(e){var n=e.replace(/^[\s　]+/g,"");return n?'<p class="paragraph">'+n+"</p>":""});return{section:t.join("")}});a.applyBindings(new function(){this.mp_name=a.observable(r.mp_name),this.banner=a.observable(r.banner),this.articles=a.observableArray(t),this.copy=i,this.extra=a.observable('<p class="extra">更多精彩请关注微信公众号<em>【'+r.mp_name+'】</em></p><p class="extra">步骤：打开微信→顶部搜索框搜索“'+r.mp_name+"”</p>'")}),o=r.mp_name}},error:function(){alert("发生错误")}})):alert("找不到该推广数据")},error:function(){alert("发生错误")}})}}});